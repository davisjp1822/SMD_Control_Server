<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.9.1"/>
<title>SMD Control Server: src/headers/SMD_Motor_Commands.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">SMD Control Server
   </div>
   <div id="projectbrief">A UNIX-socket server for controlling AMCI Modbus/TCP stepper drives.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.9.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_d0381950fc41278198232cb047ffc1f9.html">headers</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">SMD_Motor_Commands.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Motor commands for controlling and configuring an AMCI SMD series drive.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
</div>
<p><a href="_s_m_d___motor___commands_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8ee0593a39448cff86cef08f4c211ed2"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a8ee0593a39448cff86cef08f4c211ed2"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a8ee0593a39448cff86cef08f4c211ed2">SMD_open_command_connection</a> ()</td></tr>
<tr class="memdesc:a8ee0593a39448cff86cef08f4c211ed2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to open the control connection with the SMD. This connection stays open until <a class="el" href="_s_m_d___motor___commands_8h.html#abfee7626a8806bfadcd627e502172e74" title="Attempts to close the control connection with the SMD. When the connection is lost, all motion stops immediately. ">SMD_close_command_connection()</a> is called. If the connection is lost, all motion stops immediately. <br /></td></tr>
<tr class="separator:a8ee0593a39448cff86cef08f4c211ed2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abfee7626a8806bfadcd627e502172e74"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="abfee7626a8806bfadcd627e502172e74"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#abfee7626a8806bfadcd627e502172e74">SMD_close_command_connection</a> ()</td></tr>
<tr class="memdesc:abfee7626a8806bfadcd627e502172e74"><td class="mdescLeft">&#160;</td><td class="mdescRight">Attempts to close the control connection with the SMD. When the connection is lost, all motion stops immediately. <br /></td></tr>
<tr class="separator:abfee7626a8806bfadcd627e502172e74"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a92657c358dcefcf62050656d01b7df02"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a92657c358dcefcf62050656d01b7df02">SMD_read_input_registers</a> (int cl)</td></tr>
<tr class="memdesc:a92657c358dcefcf62050656d01b7df02"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reads the input registers, and outputs them in the format ",,0x0,0x0,0,0,0,0,0,0,0,0".  <a href="#a92657c358dcefcf62050656d01b7df02">More...</a><br /></td></tr>
<tr class="separator:a92657c358dcefcf62050656d01b7df02"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7bcee012af784903fc9d53b9b689396"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#ae7bcee012af784903fc9d53b9b689396">SMD_load_current_configuration</a> (int cl)</td></tr>
<tr class="memdesc:ae7bcee012af784903fc9d53b9b689396"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called prior to calling <a class="el" href="_s_m_d___motor___commands_8h.html#a139d3981c9ab0ef415c1a59b3825d53b" title="Called after SMD_load_current_configuration(int cl) Reads the input registers, and outputs them in th...">SMD_read_current_configuration(int cl)</a>. Tells the drive to read the current configuration and place it into the input registers. This will return READY_TO_READ_CONFIG to the client, which SHOULD then read the input registers once to get the configuration. This is a bit of a testy function, and care should be taken to make sure that multiple operations are not being written to the drive at the time of issuing this command. This command WILL stop motion and disable the drive.  <a href="#ae7bcee012af784903fc9d53b9b689396">More...</a><br /></td></tr>
<tr class="separator:ae7bcee012af784903fc9d53b9b689396"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a139d3981c9ab0ef415c1a59b3825d53b"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a139d3981c9ab0ef415c1a59b3825d53b">SMD_read_current_configuration</a> (int cl)</td></tr>
<tr class="memdesc:a139d3981c9ab0ef415c1a59b3825d53b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called after <a class="el" href="_s_m_d___motor___commands_8h.html#ae7bcee012af784903fc9d53b9b689396" title="Called prior to calling SMD_read_current_configuration(int cl). Tells the drive to read the current c...">SMD_load_current_configuration(int cl)</a> Reads the input registers, and outputs them in the format "###0x0,0x0,0,0,0,0,0,0,0,0".  <a href="#a139d3981c9ab0ef415c1a59b3825d53b">More...</a><br /></td></tr>
<tr class="separator:a139d3981c9ab0ef415c1a59b3825d53b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9b9012bc4894621256e6ae61330b7aa6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a9b9012bc4894621256e6ae61330b7aa6">SMD_set_configuration</a> (int32_t control_word, int32_t config_word, int32_t starting_speed, int16_t steps_per_turn, int16_t enc_pulses_per_turn, int16_t idle_current_percentage, int16_t motor_current)</td></tr>
<tr class="memdesc:a9b9012bc4894621256e6ae61330b7aa6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Loads configuration into drive memory. This does not write the configuration to permanent memory - configuration will need to be reloaded if power is lost.  <a href="#a9b9012bc4894621256e6ae61330b7aa6">More...</a><br /></td></tr>
<tr class="separator:a9b9012bc4894621256e6ae61330b7aa6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a37d9188e51fb12a0c1ea3c96b344680e"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a37d9188e51fb12a0c1ea3c96b344680e">SMD_jog</a> (int direction, int16_t accel, int16_t decel, int16_t jerk, int32_t speed)</td></tr>
<tr class="memdesc:a37d9188e51fb12a0c1ea3c96b344680e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the motor to jog. Stop the motor using either <a class="el" href="_s_m_d___motor___commands_8h.html#a7106a0b31660e4e4f853fdd94d37022a" title="Immediately stops movement, with no deceleration. This WILL set an error state in the drive...">SMD_immed_stop()</a> or <a class="el" href="_s_m_d___motor___commands_8h.html#a078ca6bb4162f465ccaa0e1ffa0182eb" title="Stops movement with a controlled deceleration. No error state is set. ">SMD_hold_move()</a>  <a href="#a37d9188e51fb12a0c1ea3c96b344680e">More...</a><br /></td></tr>
<tr class="separator:a37d9188e51fb12a0c1ea3c96b344680e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad1d6841b70ddef16c077213f317682d9"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#ad1d6841b70ddef16c077213f317682d9">SMD_relative_move</a> (int32_t rel_pos, int16_t accel, int16_t decel, int16_t jerk, int32_t speed)</td></tr>
<tr class="memdesc:ad1d6841b70ddef16c077213f317682d9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the motor to do a relative move. Stop the motor using either <a class="el" href="_s_m_d___motor___commands_8h.html#a7106a0b31660e4e4f853fdd94d37022a" title="Immediately stops movement, with no deceleration. This WILL set an error state in the drive...">SMD_immed_stop()</a> or <a class="el" href="_s_m_d___motor___commands_8h.html#a078ca6bb4162f465ccaa0e1ffa0182eb" title="Stops movement with a controlled deceleration. No error state is set. ">SMD_hold_move()</a>  <a href="#ad1d6841b70ddef16c077213f317682d9">More...</a><br /></td></tr>
<tr class="separator:ad1d6841b70ddef16c077213f317682d9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f74c2fa06627d4d0748413acb18cbfb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a1f74c2fa06627d4d0748413acb18cbfb">SMD_drive_enable</a> ()</td></tr>
<tr class="memdesc:a1f74c2fa06627d4d0748413acb18cbfb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Enables the drive circuitry, applying current to the motor.  <a href="#a1f74c2fa06627d4d0748413acb18cbfb">More...</a><br /></td></tr>
<tr class="separator:a1f74c2fa06627d4d0748413acb18cbfb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abe8692cec28fb4b20f946c37e2b31fcf"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#abe8692cec28fb4b20f946c37e2b31fcf">SMD_drive_disable</a> ()</td></tr>
<tr class="memdesc:abe8692cec28fb4b20f946c37e2b31fcf"><td class="mdescLeft">&#160;</td><td class="mdescRight">Disables the drive circuitry, removing current from the motor.  <a href="#abe8692cec28fb4b20f946c37e2b31fcf">More...</a><br /></td></tr>
<tr class="separator:abe8692cec28fb4b20f946c37e2b31fcf"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae998007dabf0ceb0947621bdbe62e238"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#ae998007dabf0ceb0947621bdbe62e238">SMD_reset_errors</a> ()</td></tr>
<tr class="memdesc:ae998007dabf0ceb0947621bdbe62e238"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets drive errors.  <a href="#ae998007dabf0ceb0947621bdbe62e238">More...</a><br /></td></tr>
<tr class="separator:ae998007dabf0ceb0947621bdbe62e238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7106a0b31660e4e4f853fdd94d37022a"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a7106a0b31660e4e4f853fdd94d37022a">SMD_immed_stop</a> ()</td></tr>
<tr class="memdesc:a7106a0b31660e4e4f853fdd94d37022a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Immediately stops movement, with no deceleration. This WILL set an error state in the drive, and the motor will need to be re-homed.  <a href="#a7106a0b31660e4e4f853fdd94d37022a">More...</a><br /></td></tr>
<tr class="separator:a7106a0b31660e4e4f853fdd94d37022a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a078ca6bb4162f465ccaa0e1ffa0182eb"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a078ca6bb4162f465ccaa0e1ffa0182eb">SMD_hold_move</a> ()</td></tr>
<tr class="memdesc:a078ca6bb4162f465ccaa0e1ffa0182eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stops movement with a controlled deceleration. No error state is set.  <a href="#a078ca6bb4162f465ccaa0e1ffa0182eb">More...</a><br /></td></tr>
<tr class="separator:a078ca6bb4162f465ccaa0e1ffa0182eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a34a52447f96850923649fa2a92adf9c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a34a52447f96850923649fa2a92adf9c7">SMD_preset_encoder_position</a> (int32_t pos)</td></tr>
<tr class="memdesc:a34a52447f96850923649fa2a92adf9c7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Presets the encoder to the value specified in pos.  <a href="#a34a52447f96850923649fa2a92adf9c7">More...</a><br /></td></tr>
<tr class="separator:a34a52447f96850923649fa2a92adf9c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae0ea877b4e6fc3b0632c8ba845f6b187"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#ae0ea877b4e6fc3b0632c8ba845f6b187">SMD_preset_motor_position</a> (int32_t pos)</td></tr>
<tr class="memdesc:ae0ea877b4e6fc3b0632c8ba845f6b187"><td class="mdescLeft">&#160;</td><td class="mdescRight">Presets the motor to the value specified in pos.  <a href="#ae0ea877b4e6fc3b0632c8ba845f6b187">More...</a><br /></td></tr>
<tr class="separator:ae0ea877b4e6fc3b0632c8ba845f6b187"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cc87973bce39dcf87c4aecaea1dafed"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a4cc87973bce39dcf87c4aecaea1dafed">SMD_find_home</a> (int direction, int32_t speed, int16_t accel, int16_t decel, int16_t jerk)</td></tr>
<tr class="memdesc:a4cc87973bce39dcf87c4aecaea1dafed"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the drive to perform the built-in homing function. This function is outlined in the motor user manual.  <a href="#a4cc87973bce39dcf87c4aecaea1dafed">More...</a><br /></td></tr>
<tr class="separator:a4cc87973bce39dcf87c4aecaea1dafed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ab732a84f8df111f452f53cf876d5bc"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a8ab732a84f8df111f452f53cf876d5bc">program_block_first_block</a> ()</td></tr>
<tr class="memdesc:a8ab732a84f8df111f452f53cf876d5bc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the drive that it should be expecting assembled move segments as the next commands.  <a href="#a8ab732a84f8df111f452f53cf876d5bc">More...</a><br /></td></tr>
<tr class="separator:a8ab732a84f8df111f452f53cf876d5bc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a06a0ab6814205bd151e773cf2aa5480c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a06a0ab6814205bd151e773cf2aa5480c">prepare_for_next_segment</a> ()</td></tr>
<tr class="memdesc:a06a0ab6814205bd151e773cf2aa5480c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tells the drive that the client is done transmitting the current segment, and should prepare for the next segment from the client.  <a href="#a06a0ab6814205bd151e773cf2aa5480c">More...</a><br /></td></tr>
<tr class="separator:a06a0ab6814205bd151e773cf2aa5480c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4399d0948f61f92b03abaced0d6e58c4"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a4399d0948f61f92b03abaced0d6e58c4">program_move_segment</a> (int32_t target_pos, int32_t speed, int16_t accel, int16_t decel, int16_t jerk)</td></tr>
<tr class="memdesc:a4399d0948f61f92b03abaced0d6e58c4"><td class="mdescLeft">&#160;</td><td class="mdescRight">Programs the drive with the specified segment.  <a href="#a4399d0948f61f92b03abaced0d6e58c4">More...</a><br /></td></tr>
<tr class="separator:a4399d0948f61f92b03abaced0d6e58c4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a93eefe9e5035de329fd1af501ac0f373"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="_s_m_d___motor___commands_8h.html#a93eefe9e5035de329fd1af501ac0f373">run_assembled_move</a> (int16_t blend_move_direction, int32_t dwell_time)</td></tr>
<tr class="memdesc:a93eefe9e5035de329fd1af501ac0f373"><td class="mdescLeft">&#160;</td><td class="mdescRight">Runs the current assembled move that is in memory.  <a href="#a93eefe9e5035de329fd1af501ac0f373">More...</a><br /></td></tr>
<tr class="separator:a93eefe9e5035de329fd1af501ac0f373"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Motor commands for controlling and configuring an AMCI SMD series drive. </p>
<dl class="section author"><dt>Author</dt><dd>John Davis <a href="#" onclick="location.href='mai'+'lto:'+'jd@'+'pa'+'uld'+'av'+'isa'+'ut'+'oma'+'ti'+'on.'+'co'+'m'; return false;">jd@pa<span style="display: none;">.nosp@m.</span>ulda<span style="display: none;">.nosp@m.</span>visau<span style="display: none;">.nosp@m.</span>toma<span style="display: none;">.nosp@m.</span>tion.<span style="display: none;">.nosp@m.</span>com</a> </dd></dl>
<dl class="section date"><dt>Date</dt><dd>September 30, 2015 </dd></dl>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a06a0ab6814205bd151e773cf2aa5480c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int prepare_for_next_segment </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells the drive that the client is done transmitting the current segment, and should prepare for the next segment from the client. </p>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a8ab732a84f8df111f452f53cf876d5bc"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int program_block_first_block </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells the drive that it should be expecting assembled move segments as the next commands. </p>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a4399d0948f61f92b03abaced0d6e58c4"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int program_move_segment </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>target_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>accel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>decel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>jerk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Programs the drive with the specified segment. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">target_pos</td><td>In motor counts, -8,388,607 to 8,388,607 </td></tr>
    <tr><td class="paramname">speed</td><td>Motor Starting Speed-2,999,999 </td></tr>
    <tr><td class="paramname">accel</td><td>Acceleration, 1-5000 </td></tr>
    <tr><td class="paramname">decel</td><td>Deceleration, 1-5000 </td></tr>
    <tr><td class="paramname">jerk</td><td>Jerk, 1-5000 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a93eefe9e5035de329fd1af501ac0f373"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">run_assembled_move </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>blend_move_direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>dwell_time</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Runs the current assembled move that is in memory. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">blend_move_direction</td><td>0 is CW, 1 is CCW </td></tr>
    <tr><td class="paramname">dwell_time</td><td>Specified dwell time between segments, in milliseconds </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="abe8692cec28fb4b20f946c37e2b31fcf"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SMD_drive_disable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Disables the drive circuitry, removing current from the motor. </p>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a1f74c2fa06627d4d0748413acb18cbfb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SMD_drive_enable </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Enables the drive circuitry, applying current to the motor. </p>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a4cc87973bce39dcf87c4aecaea1dafed"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SMD_find_home </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>accel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>decel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>jerk</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells the drive to perform the built-in homing function. This function is outlined in the motor user manual. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">direction</td><td>0 for CW, 1 for CCW </td></tr>
    <tr><td class="paramname">accel</td><td>Acceleration, 1-5000 </td></tr>
    <tr><td class="paramname">decel</td><td>Deceleration, 1-5000 </td></tr>
    <tr><td class="paramname">jerk</td><td>Acceleration jerk, 1-5000 </td></tr>
    <tr><td class="paramname">speed</td><td>Speed Motor Starting Speed-2,999,999 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a078ca6bb4162f465ccaa0e1ffa0182eb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SMD_hold_move </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stops movement with a controlled deceleration. No error state is set. </p>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a7106a0b31660e4e4f853fdd94d37022a"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SMD_immed_stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Immediately stops movement, with no deceleration. This WILL set an error state in the drive, and the motor will need to be re-homed. </p>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a37d9188e51fb12a0c1ea3c96b344680e"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SMD_jog </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>direction</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>accel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>decel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>jerk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>speed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells the motor to jog. Stop the motor using either <a class="el" href="_s_m_d___motor___commands_8h.html#a7106a0b31660e4e4f853fdd94d37022a" title="Immediately stops movement, with no deceleration. This WILL set an error state in the drive...">SMD_immed_stop()</a> or <a class="el" href="_s_m_d___motor___commands_8h.html#a078ca6bb4162f465ccaa0e1ffa0182eb" title="Stops movement with a controlled deceleration. No error state is set. ">SMD_hold_move()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">direction</td><td>0 for CW, 1 for CCW </td></tr>
    <tr><td class="paramname">accel</td><td>Acceleration, 1-5000 </td></tr>
    <tr><td class="paramname">decel</td><td>Deceleration, 1-5000 </td></tr>
    <tr><td class="paramname">jerk</td><td>Acceleration jerk, 1-5000 </td></tr>
    <tr><td class="paramname">speed</td><td>Motor Starting Speed-2,999,999 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="ae7bcee012af784903fc9d53b9b689396"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SMD_load_current_configuration </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called prior to calling <a class="el" href="_s_m_d___motor___commands_8h.html#a139d3981c9ab0ef415c1a59b3825d53b" title="Called after SMD_load_current_configuration(int cl) Reads the input registers, and outputs them in th...">SMD_read_current_configuration(int cl)</a>. Tells the drive to read the current configuration and place it into the input registers. This will return READY_TO_READ_CONFIG to the client, which SHOULD then read the input registers once to get the configuration. This is a bit of a testy function, and care should be taken to make sure that multiple operations are not being written to the drive at the time of issuing this command. This command WILL stop motion and disable the drive. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cl</td><td>The client to write the message to (a socket identifer) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Call before calling <a class="el" href="_s_m_d___motor___commands_8h.html#a139d3981c9ab0ef415c1a59b3825d53b" title="Called after SMD_load_current_configuration(int cl) Reads the input registers, and outputs them in th...">SMD_read_current_configuration(int cl)</a> </dd></dl>

</div>
</div>
<a class="anchor" id="a34a52447f96850923649fa2a92adf9c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SMD_preset_encoder_position </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Presets the encoder to the value specified in pos. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>Position, in counts. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="ae0ea877b4e6fc3b0632c8ba845f6b187"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int int SMD_preset_motor_position </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>pos</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Presets the motor to the value specified in pos. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pos</td><td>Position, in counts. -8,388,607 to 8,388,607 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a139d3981c9ab0ef415c1a59b3825d53b"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SMD_read_current_configuration </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called after <a class="el" href="_s_m_d___motor___commands_8h.html#ae7bcee012af784903fc9d53b9b689396" title="Called prior to calling SMD_read_current_configuration(int cl). Tells the drive to read the current c...">SMD_load_current_configuration(int cl)</a> Reads the input registers, and outputs them in the format "###0x0,0x0,0,0,0,0,0,0,0,0". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cl</td><td>The client to write the message to (a socket identifer) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Must call <a class="el" href="_s_m_d___motor___commands_8h.html#a92657c358dcefcf62050656d01b7df02" title="Reads the input registers, and outputs them in the format &quot;,,0x0,0x0,0,0,0,0,0,0,0,0&quot;. ">SMD_read_input_registers(int cl)</a> before calling this function. </dd></dl>

</div>
</div>
<a class="anchor" id="a92657c358dcefcf62050656d01b7df02"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SMD_read_input_registers </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>cl</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reads the input registers, and outputs them in the format ",,0x0,0x0,0,0,0,0,0,0,0,0". </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cl</td><td>The client to write the message to (a socket identifer) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="ad1d6841b70ddef16c077213f317682d9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SMD_relative_move </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>rel_pos</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>accel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>decel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>jerk</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>speed</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tells the motor to do a relative move. Stop the motor using either <a class="el" href="_s_m_d___motor___commands_8h.html#a7106a0b31660e4e4f853fdd94d37022a" title="Immediately stops movement, with no deceleration. This WILL set an error state in the drive...">SMD_immed_stop()</a> or <a class="el" href="_s_m_d___motor___commands_8h.html#a078ca6bb4162f465ccaa0e1ffa0182eb" title="Stops movement with a controlled deceleration. No error state is set. ">SMD_hold_move()</a> </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rel_pos</td><td>0 How many counts to move, relative to the current position (drive does NOT need to be homed). -8,388,607 to 8,388,607 </td></tr>
    <tr><td class="paramname">accel</td><td>Acceleration 1-5000 </td></tr>
    <tr><td class="paramname">decel</td><td>Deceleration 1-5000 </td></tr>
    <tr><td class="paramname">jerk</td><td>Acceleration jerk 1-5000 </td></tr>
    <tr><td class="paramname">speed</td><td>Speed Motor Starting Speed-2,999,999 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="ae998007dabf0ceb0947621bdbe62e238"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SMD_reset_errors </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Resets drive errors. </p>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
<a class="anchor" id="a9b9012bc4894621256e6ae61330b7aa6"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int SMD_set_configuration </td>
          <td>(</td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>control_word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>config_word</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int32_t&#160;</td>
          <td class="paramname"><em>starting_speed</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>steps_per_turn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>enc_pulses_per_turn</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>idle_current_percentage</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>motor_current</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Loads configuration into drive memory. This does not write the configuration to permanent memory - configuration will need to be reloaded if power is lost. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">control_word</td><td>Control word as specified by the AMCI documentation </td></tr>
    <tr><td class="paramname">config_word</td><td>Config word as specified by the AMCI documentation </td></tr>
    <tr><td class="paramname">starting_speed</td><td>Value between 1 and 1,999,999 </td></tr>
    <tr><td class="paramname">steps_per_turn</td><td>Value between 200 and 32,767 </td></tr>
    <tr><td class="paramname">enc_pulses_per_turn</td><td>Number of encoder pulses per turn </td></tr>
    <tr><td class="paramname">idle_current_percentage</td><td>0 to 100 </td></tr>
    <tr><td class="paramname">motor_current</td><td>Value 10-34, represents 1.0 to 3.4 Arms </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>int 0 if successful </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Fri Oct 2 2015 14:56:44 for SMD Control Server by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.9.1
</small></address>
</body>
</html>
